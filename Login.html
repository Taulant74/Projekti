<!DOCTYPE html>
<head>    
    <title>Login/Register Form</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="form-container" onsubmit="return validateForm()">
        <h2 class="teksti"><b>Login/Register</b></h2>
        <form id="loginForm">
            <input type="text" placeholder="Username" id="username" required>
            <input type="password" placeholder="Password" id="password" required>
            <button type="button" onclick="login()"><b>Kyquni</b></button>
            <div id="loginErrorMessage" class="error-message"></div>
        </form>
        <p class="or"><b>or</b></p>
        <form id="registerForm" style="display: none;">
            <input type="text" placeholder="Full Name" id="fullName" required>
            <input type="email" placeholder="Email" id="email" required>
            <input type="password" placeholder="Password" id="regPassword" required>
            <select id="gender" required>
                <option value="" disabled selected>Zgjedh gjininë</option>
                <option value="male">Mashkull</option>
                <option value="female">Femër</option>
                <option value="other">Tjetër</option>
            </select>
            <input type="date" id="birthdate" required>
            <button type="button" onclick="submitRegistration()">Regjistrohuni</button>
            <div id="registerErrorMessage" class="error-message"></div>
        </form>
        <p id="toggleText"><b>Nuk ke një llogari?</b> <a href="#" onclick="toggleForm()"><b>Regjistrohu</b></a></p>
    </div>

    <script>
        function toggleForm() {
            var loginForm = document.getElementById('loginForm');
            var registerForm = document.getElementById('registerForm');
            var toggleText = document.getElementById('toggleText');

            if (loginForm.style.display === 'none') {
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
                toggleText.innerHTML = "Nuk ke një llogari? <a href='#' onclick='toggleForm()'>Regjistrohu</a>";
            } else {
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
                toggleText.innerHTML = "Tashmë ke një llogari? <a href='#' onclick='toggleForm()'>Kyquni</a>";
            }
        }

        function login() {
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;
            var loginErrorMessage = document.getElementById('loginErrorMessage');

            if (!username || !password) {
                loginErrorMessage.textContent = 'Ju lutem plotësoni të gjitha të dhënat.';
                return;
            }

            if (!validatePassword(password)) {
                loginErrorMessage.textContent = 'Passwordi duhet të përmbajë të paktën 8 karaktere, të filloj me shkronjë të madhe, dhe të përfshijë një karakter special.';
                return;
            }

            window.location.href = 'TestHeader.html';
        }

        function validateForm() {
            var fullName = document.getElementById('fullName').value;
            var email = document.getElementById('email').value;
            var password = document.getElementById('regPassword').value;
            var gender = document.getElementById('gender').value;
            var birthdate = document.getElementById('birthdate').value;
            var registerErrorMessage = document.getElementById('registerErrorMessage');

            if (!fullName || !email || !password || !gender || !birthdate) {
                registerErrorMessage.textContent = 'Shtypni të gjitha të dhënat.';
                return;
            }

            var fullNameRegex = /^[a-zA-Z\s]+$/;
            if (!fullNameRegex.test(name)) {
                alert('Please enter a valid name.');
            }

            var emailRegex = /^[^\s@]+@[^\s@]+.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                return false;
            }

            if (email.indexOf('@gmail.com') === -1) {
                registerErrorMessage.textContent = 'Emaili duhet të përmbajë @gmail.com.';
                return;
            }

            function validatePassword(password) {
                var passwordRegex = /^(?=.*[A-Z])(?=.*[!@#$%^&*()_+{}\[\]:;<>,.?~\\/-]).{8,}$/;
                if (!validatePassword(password)) {
                    registerErrorMessage.textContent = 'Passwordi duhet të përmbajë të paktën 8 karaktere, të filloj me shkronjë të madhe, dhe të përfshijë një karakter special.';
                    return false;
                }
            }

            var birthdateInput = new Date(birthdate);
            var currentDate = new Date();
            var age = currentDate.getFullYear() - birthdateInput.getFullYear();

            if (age < 18) {
                alert('Ju duhet te jeni 18 vjeq ose me te vjeter');
                return;
            }
            window.location.href = 'TestHeader.html';
        }


    </script>
</body>

</html>